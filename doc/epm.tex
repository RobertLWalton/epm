% Educational Problem Manager (EPM) Documentation
%
% File:         epm.tex
% Author:       Bob Walton (walton@acm.org)
% Date:		See \date below.
  
\documentclass[12pt]{article}

\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{makeidx}

\makeindex

\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\textwidth}{6.5in}
\setlength{\textheight}{8.5in}
\raggedbottom

\setlength{\unitlength}{1in}

\pagestyle{headings}
\setlength{\parindent}{0.0in}
\setlength{\parskip}{1ex}

\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}
\newcommand{\subsubsubsection}[1]{\paragraph[#1]{#1.}}
\newcommand{\subsubsubsubsection}[1]{\subparagraph[#1]{#1.}}

\newcommand{\TT}[1]{{\tt \bfseries #1}}
\newcommand{\EOL}{\penalty \exhyphenpenalty}

% Begin \tableofcontents surgery.

\newcount\AtCatcode
\AtCatcode=\catcode`@
\catcode `@=11	% @ is now a letter

\renewcommand{\contentsname}{}
\renewcommand\l@section{\@dottedtocline{1}{0.1em}{1.4em}}
\renewcommand\l@table{\@dottedtocline{1}{0.1em}{1.4em}}
\renewcommand\tableofcontents{%
    \begin{list}{}%
	     {\setlength{\itemsep}{0in}%
	      \setlength{\topsep}{0in}%
	      \setlength{\parsep}{1ex}%
	      \setlength{\labelwidth}{0in}%
	      \setlength{\baselineskip}{1.5ex}%
	      \setlength{\leftmargin}{0.8in}%
	      \setlength{\rightmargin}{0.8in}}%
    \item\@starttoc{toc}%
    \end{list}}
\renewcommand\listoftables{%
    \begin{list}{}%
	     {\setlength{\itemsep}{0in}%
	      \setlength{\topsep}{0in}%
	      \setlength{\parsep}{1ex}%
	      \setlength{\labelwidth}{0in}%
	      \setlength{\baselineskip}{1.5ex}%
	      \setlength{\leftmargin}{1.0in}%
	      \setlength{\rightmargin}{1.0in}%
	      }%
    \item\@starttoc{lot}%
    \end{list}}

\catcode `@=\AtCatcode	% @ is now restored

% End \tableofcontents surgery.

\newenvironment{indpar}[1][0.4in]%
	{\begin{list}{}%
		     {\setlength{\itemsep}{0in}%
		      \setlength{\topsep}{0in}%
		      \setlength{\parsep}{1ex}%
		      \setlength{\labelwidth}{#1}%
		      \setlength{\leftmargin}{#1}%
		      \addtolength{\leftmargin}{\labelsep}}%
	 \item}%
	{\end{list}}

\newcommand{\ITEM}{\hspace*{-0.2in}}

\begin{document}
        
\title{Educational Problem Manager}

\author{Robert L. Walton}

\date{October 30, 2019}
 
\maketitle

\newpage
\begin{center}
\large \bf Table of Contents
\end{center}

\bigskip

\tableofcontents 

\newpage

\section{Introduction}

The Educational Problem Manager permits educational programming
problems to be developed and used.  Its users merely need an
editor on their client computer: all compilation, including
text processing (e.g., latex compilation), is done on the
server.  The interface is a web browser.

The main features are:

\begin{itemize}
\item Server Operating System: linux (CentOS or Ubuntu)
\item Documentation Language: latex (pdflatex)
\item System Programming Language: php (version 5.6 or later)
\item User Programming Languages:
\begin{itemize}
\item C (gcc)
\item C++ (g++)
\item JAVA (OpenJDK)
\item COMMONLISP (SBCL)
\end{itemize}

\end{itemize}

This document is a comprehensive manual for both users and
system maintainers.  There are also HTML web pages to guide
users through common user actions.

\section{Overview}

EPM in effect is a file system, where some files are source
files uploaded by users, and many files are automatically
generated from source files or from other generated files.
The typical user does \underline{not} have control over
the precise commands use to generate files from other
files, but can merely upload source files and cause generated
files to be generated.  The user can also display files
and information derived from files, and download source
and generated files.

So let us look at a detailed example involving a user named
\TT{UUUU} and a problem named \TT{PPPP}.

There is a project named `\TT{system}' which all users can access.
Suppose this contains the problem \TT{PPPP}.  This means the
following files exist:

\begin{indpar}
\ITEM\TT{system/PPPP/PPPP.tex}  Problem description in latex.
\\
\ITEM\TT{system/PPPP/PPPP.pdf}  Problem description in pdf made from
    \TT{PPPP.tex} by using \TT{pdflatex}.
\\
\ITEM\TT{system/PPPP/PPPP.cc}  Judge's solution to the problem.
    Cannot be linked to the user's \TT{UUUU/PPPP} directory.
\\
\ITEM\TT{system/PPPP/PPPP}  Binary of judge's solution to the problem,
    made from \TT{PPPP.cc} by using \TT{g++}.
    Cannot be linked to the user's \TT{UUUU/PPPP} directory.
\\[1ex]
\ITEM\begin{tabular}[t]{@{}l}
     \TT{system/PPPP/00-000-PPPP.in} \\
     \TT{system/PPPP/00-001-PPPP.in} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \TT{system/PPPP/01-000-PPPP.in} \\
     \TT{system/PPPP/01-001-PPPP.in} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \end{tabular}
     ~~~~
     \begin{tabular}[t]{p{3in}}
     Test case input files.  Symbolically linked to \TT{UUUU/PPPP}
     directory, but not visible to user except for \TT{00-\ldots.in}
     files that are sample inputs.
     \end{tabular}
\\
\ITEM\TT{system/PPPP/generate\_PPPP.cc}  Source code for generate
    program that generates actual test case input from \TT{.in} files.
    Cannot be linked to the user's \TT{UUUU/PPPP} directory.
\\
\ITEM\TT{system/PPPP/generate\_PPPP}  Binary of generate
    program made by using \TT{g++} on \TT{gen\-erate\_\EOL PPPP.cc}.
    Symbolically linked to \TT{UUUU/PPPP} directory and usable
    by the user to generate user test case input.
\\[1ex]
\ITEM\begin{tabular}[t]{@{}l}
     \TT{system/PPPP/00-000-PPPP.test} \\
     \TT{system/PPPP/00-001-PPPP.test} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \TT{system/PPPP/01-000-PPPP.test} \\
     \TT{system/PPPP/01-001-PPPP.test} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \end{tabular}
     ~~~~
     \begin{tabular}[t]{p{3in}}
     Judge's test case output files.  Each is made by running
     the corresponding \TT{.in} file first through the generate
     program and then through the judge's solution program.
     Symbolically linked to \TT{UUUU/PPPP}
     directory, but not visible to user except for \TT{00-\ldots.test}
     files that are sample outputs.
     \end{tabular}
\\
\ITEM\TT{system/PPPP/PPPP.run}  Standard `run' file which lists
    the test cases to be run in the order they are to be
    run.  For example:
   `{\TT{00-000-PPPP}, \TT{00-001-PPPP}, \ldots}'.
    Symbolically linked to
    the \TT{UUUU/PPPP} directory and visible to the user.
\\
\ITEM\TT{system/PPPP/sample-PPPP.run}  Ditto but only includes sample tests.
\end{indpar}

All compiled programs follow the convention that they cannot
open files, but must use file descriptors, in particular
the standard input and standard output.  If a solution writes
the standard error, it is deemed to have crashed (because
runtime systems write the standard error if they detect
JAVA errors, memory faults, etc.).  Sometimes a non-solution
will read from file descriptor 3, which is used as a secondary
input when two inputs are required, as by a generate program
(or a filter program, described below).

All this is to allow all compiled programs to run in a sandbox,
so as to protect the server from malicious programs, including,
for example, generate programs submitted by users developing
their own problems.

The user directory has the following files, not including
those symbolically linked from the \TT{system/PPPP} directory:

\begin{indpar}
\ITEM\TT{system/PPPP/PPPP.py}  User's solution to the problem.
    May be in a different programming language from the judge's
    solution (e.g., \TT{.py} is python, \TT{.cc} is C++).
    Uploaded by the user (and thus modifiable by the user).
\\
\ITEM\TT{system/PPPP/PPPP}  Binary of users's solution to the problem,
    typically a \TT{bash} script that executes `\TT{python3 PPPP.py}'
    (if the user's solution were C++, \TT{g++} would be used to
    compile \TT{PPPP.cc}).
\\[1ex]
\ITEM\begin{tabular}[t]{@{}l}
     \TT{system/PPPP/00-000-PPPP.out} \\
     \TT{system/PPPP/00-001-PPPP.out} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \TT{system/PPPP/01-000-PPPP.out} \\
     \TT{system/PPPP/01-001-PPPP.out} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \end{tabular}
     ~~~~
     \begin{tabular}[t]{p{3in}}
     User's test case output files.  Each is made by running
     the corresponding \TT{.in} file first through the generate
     program and then through the user's solution program.
     \end{tabular}
\\
\ITEM\TT{system/PPPP/PPPP.score}  Score associated with
    the `\TT{system/PPPP/PPPP.run}' file.  Either says the run was completely
    correct, or specifies the first test case that failed.
    Also contains a history of past scores.
\\
\ITEM\TT{system/PPPP/sample-PPPP.score}  Ditto but only include sample tests.
\\[1ex]
\ITEM\begin{tabular}[t]{@{}l}
     \TT{system/PPPP/00-000-PPPP.gin} \\
     \TT{system/PPPP/00-001-PPPP.gin} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \TT{system/PPPP/01-000-PPPP.gin} \\
     \TT{system/PPPP/01-001-PPPP.gin} \\
     \ldots\ldots\ldots\ldots\ldots \\
     \end{tabular}
     ~~~~
     \begin{tabular}[t]{p{3in}}
     Result of running corresponding \TT{.in} files through the 
     generate program.  These files represent the input actually
     seen by the user's \TT{PPPP} solution program.  Not all
     these files are computed: only the files for the sample
     tests and the first failed test case are computed.
     \end{tabular}

\end{indpar}

The \TT{.in}, \TT{.gin}, \TT{.out}, and \TT{.test} files are \underline{not}
visible to the user unless they are for sample tests
(with names of the form \TT{00-\ldots}) or for the first test
case that failed in the user's last run.

The user, to develop a problem solution, repeatedly uploads and
tests the \TT{PPPP.py} file.  Each test produces a \TT{.in},
\TT{.gin}, \TT{.out}, and \TT{.test} file that can be inspected,
along with differences between the \TT{.out} and \TT{.test}
files.

In the above we have assumed that the problem is such that the
\TT{.out} file is uniquely determined by the \TT{.in} file,
with perhaps minor differences such as spacing and
the exact number of decimal places printed (as long as number
agree within the tolerance specified by the problem).
However some problems have many possible correct solutions.
For these the following files are added.

In the \TT{system/PPPP} directory:




\end{document}
