#! /bin/php
<?php

// File:	epm_run
// Author:	Robert L Walton <walton@acm.org>
// Date:	Fri Dec 20 12:20:47 EST 2019

$argv = $_SERVER['argv'];

if ( count ( $argv ) < 8 )
{
    echo <<<'EOT'
epm_run root-directory data-directory \
        userid problem working-subdirectory \
	run-file status-file

Executes the run defined by the run-file in background.
The background job writes its current and final status
to the status-file.

The working-subdirectory is relative to the problem
directory.  The status-file is relative to the working-
subdirectory.

EOT;
    exit ( 0 );
}

$epm_root = $argv[1];
$epm_data = $argv[2];
$userid   = $argv[3];
$problem  = $argv[4];
$work     = $argv[5];
$rfile    = $argv[6];
$sfile    = $argv[7];

$include = "$epm_root/include";

include "$include/epm_make.php";

load_template_cache();

var_dump ( $GLOBALS );

?>
